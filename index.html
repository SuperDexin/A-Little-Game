<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>一个小游戏</title>
<style>
	body{
		margin: 0 auto;
		width: 300px;
	}

	div{
		width: 100%;
	}
</style>

</head>

<body>
	<script>
	var colors = ['红', '绿', '黄', '蓝', '紫'];

	var question = new Array(5);
	var answers = new Array(5);

	var nownum = 0;
	var round = 0;

	var answers_bool = true;

	refresh();


	function choose(ID){
	  if (nownum >= 0 && nownum < 5){
	    answers[nownum] = ID; 
	    nownum += 1;
	    var content = (round+1) + ": ";
	    for(var i=0; i<nownum; i++){
	    	content = content+" "+colors[answers[i]];
	    }
			document.getElementById("answer_region").innerHTML=content;
	  } 
	}

	function del(){
	  if (nownum > 0 && nownum <= 5){
	    nownum -= 1;
	    var content = (round+1) + ": ";
	    for(var i=0; i<nownum; i++){
	    	content = content+" "+colors[answers[i]];
	    }
			document.getElementById("answer_region").innerHTML=content;
	  }
	}

	function submit(){
	  if (nownum == 5){
	    show();
	  }
	}

	function show(){
		round++;
	  var content1 = round + ": ";
	  for(var i=0; i<5; i++){
	  	content1 = content1+" "+colors[answers[i]];
	  }
	  [location_num, num_num] = match();
	  content2 = "" + location_num + "个位置颜色正确 " + num_num + "种颜色数量正确";

	  var Content1 = document.createTextNode(content1);
	  var Content2 = document.createTextNode(content2);

		document.getElementById("answer").appendChild(Content1);
		document.getElementById("answer").appendChild(document.createElement("br"));
		document.getElementById("answer").appendChild(Content2);
		document.getElementById("answer").appendChild(document.createElement("br"));

		document.getElementById("answer_region").innerHTML=(round+1) + ":";
		nownum = 0;
	}

	function refresh(){
		for(var i=0; i<5; i++){
			question[i] = Math.floor((Math.random() * 5));
		}
		document.getElementById("head").innerHTML="小游戏";
		document.getElementById("answer").innerHTML="";
		document.getElementById("answer_region").innerHTML="1:";
		round = 0;
		nownum = 0;
		answers_bool = true;
		document.getElementById("check_answer").innerHTML="显示答案";
	}

	function match(){
		var location_num = 0;
		var answers_color_num = count(answers);
		var question_color_num = count(question);
		var num_num = 0;
		for(var i=0; i<5; i++){
			if (question[i] == answers[i]){
				location_num ++;
			}
			if ((answers_color_num[i] == question_color_num[i]) && (answers_color_num[i] != 0)){
				num_num++;
			}
		}
		return [location_num, num_num];
	}

	function count(array){
		var color_num = [0,0,0,0,0];
		for(var i=0; i<5; i++){
			color_num[array[i]] ++;
		}
		return color_num;
	}

	function show_answer(){
		var content = "";
		var button_content;
		if (!answers_bool){
			button_content = "显示答案";
			content = "小游戏";
		}
		if(answers_bool){
			for(var i=0; i<5; i++){
	  		content = content+" "+colors[question[i]];
	  	}
	  	button_content = "隐藏答案";
	  }
		document.getElementById("head").innerHTML=content;
		document.getElementById("check_answer").innerHTML=button_content;
		answers_bool = !answers_bool;
	}

	</script>

	<div>
	<h1 id="head">小游戏</h1>
	<p>规则：一共有五个位置，每个位置会随机生成红、绿、黄、蓝、紫五种颜色之一，需要我们去猜出生成的结果是什么。
		<br>每猜测一次，可得到两条信息：
		<br>1、有几个位置上出现的颜色是正确的；2、有几个颜色出现的次数是正确的（不包括猜对出现0次的颜色）。
		<br>如生成“黄 紫 紫 紫 红”，猜测“黄 紫 黄 红 红”，会出现“3个位置颜色正确 0种颜色数量正确”。
	</p>
	<p id="answer"></p>
	<p></p>
	<p id="answer_region">1:</p>
  <p>
    <button id="0" onClick="choose(this.id)">红</button>
    <button id="1" onClick="choose(this.id)">绿</button>
    <button id="2" onClick="choose(this.id)">黄</button>
    <button id="3" onClick="choose(this.id)">蓝</button>
    <button id="4" onClick="choose(this.id)">紫</button>    
  </p>
  <p>
    <button onClick="submit()">确定</button>
    <button onClick="del()">删除</button>
    <button onClick="refresh()">换一局</button>
    <button onClick="show_answer()" id="check_answer">显示答案</button>
  </p>
  </div>

</body>


</html>
